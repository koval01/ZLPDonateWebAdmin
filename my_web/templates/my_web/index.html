{% extends 'my_web/base.html' %}

{% block title %}
Aware Search - Поиск
{% endblock %}

{% block title_header %}
Aware Search
{% endblock %}

{% block og_desc %}
Удобная и красивая поисковая система
{% endblock %}

{% block twitter_desc %}
Удобная и красивая поисковая система
{% endblock %}

{% block public_re %}
{{ token_re }}
{% endblock %}

{% block content %}
{% load static %}
    <div style="display: block;margin-left: auto;margin-right: auto;border-radius: 20%;">
        <div class="search-aware-block-global">
            <div class="wrapper" style="margin-bottom: 5%;">
                <div class="search-input">
                    <a href="" target="_blank" hidden></a>
                    <input type="text" maxlength="3000" class="search-input-aware" size="100" placeholder="{{ search_template }}">
                    <div class="autocom-box">
                        <i></i>
                    </div>
                    <div class="load-more-end-butt icon">
                        <i class="spinner-border spinner_search_load_aware"></i>
                        <i class="fas fa-search icon_search_load_aware_one"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="row-posts-end">
            {% if r_type %}
                <div class="col-12 col-lg-12 padding-block-center-box">
                    <div class="user box aos-init aos-animate" data-aos="fade-up">
                        <div style="float: left;">
                            <label class="username">Случайная цитата</label><br>
                            <label class="city"><i>„{{ add_.text }}“</i><br><br><b>{{ add_.author }}</b></label><br>
                            <a style="font-size: 12px;" href="{% url 'index_page' %}"><b>awse.us</b></a><br>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="col-12 col-lg-12 padding-block-center-box">
                    <div class="user box aos-init aos-animate" data-aos="fade-up">
                        <div style="float: left;">
                            <label class="username">Случайный факт</label><br>
                            <label class="city"><i>{{ add_.text }}</i><br></label><br><br>
                            <a style="font-size: 12px;" href="{% url 'index_page' %}"><b>awse.us</b></a><br>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
        <div style="margin: auto;">
            <p class="no-more-results-text" style="color: #828282;font-size: 14px;visibility: hidden;text-align: center;">Больше результатов нет</p>
        </div>
        <button style="margin:0 auto;display:block;background-color:#121213;visibility: hidden;margin-bottom: 5%;" class="btn btn-dark load-more-end-butt-search-array">Загрузить еще&nbsp;<span class="spinner-border spinner-border-sm" aria-hidden="true"></span></button>
    </div>
{% endblock %}

{% block js_module %}
    {% csrf_token %}
    <script type="text/javascript">
        function imgError(e){return e.onerror="",e.src="{% static 'my_web/images/background.png' %}",!0}function throttle(e,t){let a,i,n=!1;return function o(){if(n)return a=arguments,void(i=this);e.apply(this,arguments),n=!0,setTimeout(function(){n=!1,a&&(o.apply(i,a),a=i=null)},t)}}function etdd(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}function mob(){return etdd()?0:1}var search_index=0,comment_spin_global="",error_block_space_design='<div class="col-12 col-lg-12 padding-block-center-box"><div class="user box aos-init aos-animate" data-aos="fade-up"><div style="float: left;"><label class="username ml11"><span class="text-wrapper"><span class="line line1"></span><span class="letters">Прости но мы не смогли ничего найти по твоему запросу...</span></span></label><br><label class="city"></label><br><br><a style="font-size: 12px;" href="{% url "index_page" %}"><b>awse.us</b></a><br></div></div></div>';function load_ajax_end_page(e,t){const a=$(".no-more-results-text"),i=$(".load-more-end-butt"),n=i.find("span"),o=$(".load-more-end-butt-search-array"),s=o.find("span");var r=jQuery("[name=csrfmiddlewaretoken]").val();grecaptcha.ready(function(){grecaptcha.execute("{{ token_re }}",{action:"submit"}).then(function(c){var l=c;$.ajax({url:"{% url 'load_more' %}",type:"POST",data:{csrfmiddlewaretoken:r,validtoken:"{{ token_valid }}",typeload:t,additions:0,news:0,gr_token:l,covid_stat:0,search:e,mobile:mob()},beforeSend:function(){a.css("visibility","hidden"),i.attr("disabled",!0),n.addClass("d-inline-block"),AOS.init(),comment=document.createComment($(".icon_search_load_aware_one").get(0).outerHTML),$(".icon_search_load_aware_one").replaceWith(comment),i.css("top","-5px"),i.css("right","10px"),comment_spin=comment_spin_global,$(".spinner_search_load_aware").replaceWith(comment_spin),$(comment_spin).replaceWith(comment_spin.nodeValue)},success:function(e){$(comment).replaceWith(comment.nodeValue),i.removeAttr("style"),comment_post_proccess=document.createComment($(".spinner_search_load_aware").get(0).outerHTML),$(".spinner_search_load_aware").replaceWith(comment_post_proccess),o.css("visibility","visible"),e.replace(/[^+\w]/g,"").length<10&&o.css("visibility","hidden"),s.css("visibility","hidden"),s.removeClass("d-inline-block"),"newsession"==t&&($(".row-posts-end").empty(),search_index=21),i.attr("disabled",!1),n.removeClass("d-inline-block"),"Ошибка валидации!"==e?alert("Ошибка. Не удалось подтвердить запрос. Перезагрузите страницу."):$(".row-posts-end").append(e),AOS.init(),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()})},error:function(){i.removeAttr("style"),comment_post_proccess=document.createComment($(".spinner_search_load_aware").get(0).outerHTML),$(".spinner_search_load_aware").replaceWith(comment_post_proccess),$(".row-posts-end").empty(),$(comment).replaceWith(comment.nodeValue),$(".row-posts-end").append(error_block_space_design),i.attr("disabled",!1),n.removeClass("d-inline-block")}})})})}function load_continue_ajax_end_page(e,t){const a=$(".no-more-results-text"),i=$(".load-more-end-butt-search-array"),n=i.find("span");var o=jQuery("[name=csrfmiddlewaretoken]").val();grecaptcha.ready(function(){grecaptcha.execute("{{ token_re }}",{action:"submit"}).then(function(s){var r=s;$.ajax({url:"{% url 'load_more' %}",type:"POST",data:{csrfmiddlewaretoken:o,validtoken:"{{ token_valid }}",typeload:t,additions:0,news:0,gr_token:r,covid_stat:0,search:e,mobile:mob(),search_index_:search_index},beforeSend:function(){a.css("visibility","hidden"),i.attr("disabled",!0),n.addClass("d-inline-block"),n.css("visibility","visible"),AOS.init()},success:function(e){n.css("visibility","hidden"),(search_index+=10)>100&&(i.css("visibility","hidden"),a.css("visibility","visible")),i.attr("disabled",!1),n.removeClass("d-inline-block"),"Ошибка валидации!"==e?alert("Ошибка. Не удалось подтвердить запрос. Перезагрузите страницу."):$(".row-posts-end").append(e),AOS.init(),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()})},error:function(){i.css("visibility","hidden"),i.attr("disabled",!1),n.css("visibility","hidden"),n.removeClass("d-inline-block"),a.css("visibility","visible")}})})})}function onMenuClicked(){$(".menu_box").is(":hidden")?($(".menu_box").show(),$(".float_bg").show()):($(".menu_box").hide(),$(".float_bg").hide())}function get_suggestions(){grecaptcha.ready(function(){grecaptcha.execute("{{ token_re }}",{action:"submit"}).then(function(e){$.ajax({url:"./suggestions",type:"GET",data:{q:$(".search-input-aware").val(),gr_token:e}}).done(function(){})})})}$(".search-input-aware").on("keyup",function(e){if("Enter"===e.key||13===e.keyCode){var t=$(".search-input-aware").val();0==t.length&&(t="{{ search_template }}"),load_ajax_end_page(t,"newsession")}}),$(".search-input-aware").on("input",function(){var e=$(".search-input-aware").val();if(0==e.length)get_suggestions(e);else{throttle(get_suggestions,150)(e)}}),$(".load-more-end-butt").on("click",function(){var e=$(".search-input-aware").val();0==e.length&&(e="{{ search_template }}"),load_ajax_end_page(e,"newsession")}),$(".load-more-end-butt-search-array").on("click",function(){var e=$(".search-input-aware").val();0==e.length&&(e="{{ search_template }}"),load_continue_ajax_end_page(e,search_index)}),$(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&setTimeout(function(){$(window).scrollTop(),$(document).height(),$(window).height()},100)}),AOS.init(),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip(),my_element_jq=$(".spinner_search_load_aware"),comment_spin_global=document.createComment(my_element_jq.get(0).outerHTML),my_element_jq.replaceWith(comment_spin_global)}),$("a.scroll-to").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").stop().animate({scrollTop:$(t).offset().top-60},900)}),$(window).scroll(function(){home_button=document.getElementById("h_butt"),1e3<$(window).scrollTop()?home_button.style.visibility="visible":home_button.style.visibility="hidden"}),$(document).on("click",function(e){$(e.target).hasClass("float_bg")&&($(".menu_box").hide(),$(".float_bg").hide())});
    </script>
{% endblock %}

